<div class="profile-container">
  <!-- Header -->
  <div class="profile-header">
    <h1>ğŸ‘¤ My Profile</h1>
    <p>View and manage your account information</p>
  </div>

  <!-- Success/Error Messages -->
  <div class="alert alert-success" *ngIf="successMessage">
    {{ successMessage }}
  </div>
  <div class="alert alert-danger" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <!-- Loading State -->
  <div class="loading" *ngIf="loading">
    <div class="spinner"></div>
    <p>Loading profile...</p>
  </div>

  <!-- Profile Content -->
  <div class="profile-content" *ngIf="!loading">
    <!-- Profile Info Card -->
    <div class="profile-card">
      <div class="card-header">
        <h2>Personal Information</h2>
        <button class="btn-edit" (click)="toggleEditMode()" *ngIf="!isEditMode">
          âœï¸ Edit
        </button>
        <button class="btn-cancel" (click)="toggleEditMode()" *ngIf="isEditMode">
          âœ• Cancel
        </button>
      </div>

      <div class="card-body">
        <!-- View Mode -->
        <div class="info-grid" *ngIf="!isEditMode">
          <div class="info-item">
            <label>Username</label>
            <p>{{ userProfile?.username || 'N/A' }}</p>
          </div>
          <div class="info-item">
            <label>Email</label>
            <p>{{ userProfile?.email || 'N/A' }}</p>
          </div>
          <div class="info-item">
            <label>Phone</label>
            <p>{{ userProfile?.phone || 'N/A' }}</p>
          </div>
          <div class="info-item">
            <label>Address</label>
            <p>{{ userProfile?.address || 'N/A' }}</p>
          </div>
          <div class="info-item">
            <label>Account Status</label>
            <p>
              <span class="status-badge" [class.active]="userProfile?.active">
                {{ userProfile?.active ? 'âœ… Active' : 'âŒ Inactive' }}
              </span>
            </p>
          </div>
          <div class="info-item">
            <label>Member Since</label>
            <p>{{ userProfile?.createdAt | date:'mediumDate' }}</p>
          </div>
        </div>

        <!-- Edit Mode -->
        <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" *ngIf="isEditMode" class="profile-form">
          <div class="form-row">
            <div class="form-group">
              <label>Username</label>
              <input
                type="text"
                formControlName="username"
                placeholder="Enter username"
                class="form-control"
              />
            </div>
            <div class="form-group">
              <label>Email</label>
              <input
                type="email"
                formControlName="email"
                placeholder="Enter email"
                class="form-control"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Phone</label>
              <input
                type="tel"
                formControlName="phone"
                placeholder="Enter phone number"
                class="form-control"
              />
            </div>
          </div>

          <div class="form-group">
            <label>Address</label>
            <input
              type="text"
              formControlName="address"
              placeholder="Enter street address"
              class="form-control"
            />
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary" [disabled]="isSubmitting">
              {{ isSubmitting ? 'Saving...' : 'ğŸ’¾ Save Changes' }}
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Account Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“¦</div>
        <div class="stat-content">
          <h3>{{ totalOrders }}</h3>
          <p>Total Orders</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ’°</div>
        <div class="stat-content">
          <h3>${{ totalSpent | number:'1.2-2' }}</h3>
          <p>Total Spent</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">â­</div>
        <div class="stat-content">
          <h3>Member</h3>
          <p>Account Status</p>
        </div>
      </div>
    </div>

    <!-- Danger Zone -->
    <div class="danger-card">
      <div class="card-header danger-header">
        <h2>âš ï¸ Danger Zone</h2>
      </div>
      <div class="card-body">
        <p>Delete your account and all associated data. This action cannot be undone.</p>
        <button class="btn-danger" (click)="deleteAccount()">ğŸ—‘ï¸ Delete Account</button>
      </div>
    </div>
  </div>
</div>